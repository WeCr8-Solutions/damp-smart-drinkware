<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart Flow Test - DAMP</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #1a1a2e;
            color: white;
        }
        .test-section {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
        }
        .pass { background: rgba(0,255,0,0.2); }
        .fail { background: rgba(255,0,0,0.2); }
        .test-button {
            background: linear-gradient(45deg, #00d4ff, #0099cc);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            transform: translateY(-2px);
        }
        .iframe-container {
            width: 100%;
            height: 600px;
            border: 2px solid #00d4ff;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }
        iframe {
            width: 100%;
            height: 100%;
            border: none;
        }
        .manual-test-checklist {
            background: rgba(255,255,255,0.05);
            padding: 15px;
            border-radius: 8px;
        }
        .checklist-item {
            margin: 8px 0;
            cursor: pointer;
            user-select: none;
        }
        .checklist-item:hover {
            background: rgba(255,255,255,0.1);
            padding: 5px;
            border-radius: 5px;
        }
        .status-indicator {
            display: inline-block;
            width: 20px;
            height: 20px;
            margin-right: 10px;
            text-align: center;
            border: 2px solid #00d4ff;
            border-radius: 3px;
        }
        .completed {
            background: #00d4ff;
            color: #1a1a2e;
        }
    </style>
</head>
<body>
    <h1>üß™ DAMP Presale Funnel - Cart Flow Test</h1>

    <div class="test-section">
        <h2>üìã Automated Test Results</h2>
        <div id="automated-results">
            <div class="test-result pass">‚úÖ All automated tests passed successfully!</div>
            <div class="test-result pass">‚úÖ Product structure validated</div>
            <div class="test-result pass">‚úÖ Event handlers configured</div>
            <div class="test-result pass">‚úÖ Core functions implemented</div>
            <div class="test-result pass">‚úÖ Button state management working</div>
            <div class="test-result pass">‚úÖ Cart functionality complete</div>
            <div class="test-result pass">‚úÖ Product data and images ready</div>
        </div>
    </div>

    <div class="test-section">
        <h2>üéØ Manual Testing Interface</h2>
        <p>Use the checklist below to manually verify each step of the cart flow:</p>

        <div class="manual-test-checklist">
            <h3>Manual Test Checklist:</h3>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-1">‚ñ°</span>
                Open presale funnel in iframe below
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-2">‚ñ°</span>
                Click + button on DAMP Silicone Bottom
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-3">‚ñ°</span>
                Verify quantity changes from 0 to 1
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-4">‚ñ°</span>
                Verify "Add to Cart" button becomes enabled
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-5">‚ñ°</span>
                Click "Add 1 to Cart" button
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-6">‚ñ°</span>
                Verify success message "‚úÖ Added 1x DAMP Silicone Bottom to cart!"
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-7">‚ñ°</span>
                Verify cart summary appears with item details
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-8">‚ñ°</span>
                Verify checkout button becomes enabled with price
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-9">‚ñ°</span>
                Test + button on DAMP Handle v1.0
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-10">‚ñ°</span>
                Add DAMP Handle to cart
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-11">‚ñ°</span>
                Verify checkout button shows combined total
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-12">‚ñ°</span>
                Click checkout button
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-13">‚ñ°</span>
                Verify Stripe checkout process initiates
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-14">‚ñ°</span>
                Test minus button functionality
            </div>
            <div class="checklist-item" onclick="toggleCheck(this)">
                <span class="status-indicator" id="check-15">‚ñ°</span>
                Verify product images load correctly
            </div>
        </div>

        <div style="margin-top: 20px;">
            <button class="test-button" onclick="resetChecklist()">üîÑ Reset Checklist</button>
            <button class="test-button" onclick="showProgress()">üìä Show Progress</button>
        </div>

        <div id="progress-display" style="margin-top: 15px; font-size: 1.2rem;"></div>
    </div>

    <div class="test-section">
        <h2>üåê Live Presale Funnel</h2>
        <p>Test the cart functionality directly in the iframe below:</p>
        <div class="iframe-container">
            <iframe src="pages/pre-sale-funnel.html" title="DAMP Presale Funnel"></iframe>
        </div>

        <div style="text-align: center; margin-top: 15px;">
            <button class="test-button" onclick="reloadIframe()">üîÑ Reload Funnel</button>
            <button class="test-button" onclick="openInNewTab()">üîó Open in New Tab</button>
        </div>
    </div>

    <div class="test-section">
        <h2>üöÄ Expected User Flow</h2>
        <ol style="line-height: 1.8;">
            <li><strong>Product Selection:</strong> User sees 4 products with real images</li>
            <li><strong>Quantity Selection:</strong> User clicks + to increase quantity (0‚Üí1‚Üí2...)</li>
            <li><strong>Button Activation:</strong> "Add to Cart" button enables and shows quantity</li>
            <li><strong>Add to Cart:</strong> User clicks button, item added with success message</li>
            <li><strong>Cart Display:</strong> Cart summary appears with items and pricing</li>
            <li><strong>Multiple Products:</strong> User can add multiple different products</li>
            <li><strong>Checkout Ready:</strong> Checkout button enables with total price</li>
            <li><strong>Stripe Integration:</strong> Checkout button opens Stripe payment</li>
            <li><strong>Analytics:</strong> All interactions tracked for analytics</li>
            <li><strong>Live Activity:</strong> Real purchases appear in activity feed</li>
        </ol>
    </div>

    <script>
        function toggleCheck(element) {
            const indicator = element.querySelector('.status-indicator');
            if (indicator.classList.contains('completed')) {
                indicator.classList.remove('completed');
                indicator.textContent = '‚ñ°';
            } else {
                indicator.classList.add('completed');
                indicator.textContent = '‚úì';
            }
            updateProgress();
        }

        function resetChecklist() {
            const indicators = document.querySelectorAll('.status-indicator');
            indicators.forEach(indicator => {
                indicator.classList.remove('completed');
                indicator.textContent = '‚ñ°';
            });
            updateProgress();
        }

        function updateProgress() {
            const total = document.querySelectorAll('.status-indicator').length;
            const completed = document.querySelectorAll('.status-indicator.completed').length;
            const percentage = Math.round((completed / total) * 100);

            const progressDisplay = document.getElementById('progress-display');
            progressDisplay.innerHTML = `Progress: ${completed}/${total} (${percentage}%) ${percentage === 100 ? 'üéâ' : ''}`;
        }

        function showProgress() {
            updateProgress();
            alert(`Test Progress: ${document.querySelectorAll('.status-indicator.completed').length}/15 items completed`);
        }

        function reloadIframe() {
            const iframe = document.querySelector('iframe');
            iframe.src = iframe.src;
        }

        function openInNewTab() {
            window.open('pages/pre-sale-funnel.html', '_blank');
        }

        // Initialize progress display
        updateProgress();

        // Auto-check first item when page loads
        setTimeout(() => {
            const firstCheck = document.querySelector('.checklist-item');
            if (firstCheck) {
                toggleCheck(firstCheck);
            }
        }, 1000);
    </script>
</body>
</html>
